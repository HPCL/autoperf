[Main]
Experiments = pi pi_inst                                   ; list of the name of experiments defined in this config file

[Experiments]
rootdir   = output                                         ; rootdir of all relative path in this config file, also used to store profiling data
taulib    = /usr/local/packages/tau-2.23.2b1/x86_64/lib    ; where to find TAU libraries
Platform  = aciss                                          ; the platform this experiment will be running on
Datastore = taudb                                          ; the only datastore we support is 'taudb' for now
Analyses  = metrics                                        ; a list of analyses we are going to do
exeopt    = 10000000                                       ; cmdline options for 'execmd'
mpi       = yes                                            ; this is a MPI application
builder   = make

[Experiments.pi]
Tool      = hpctoolkit                                     ; analyses tool we are going to use, could be 'tau' or 'hpctoolkit'
builder   = make -C .. pi                                  ; command used to build the application
execmd    = ../pi                                          ; the command used to run the app we are going to analyze

[Experiments.pi_inst]
Tool      = tau                                            ; analyses tool we are going to use, could be 'tau' or 'hpctoolkit'
builder   = make -C .. pi_inst                             ; command used to build the application
execmd    = ../pi_inst                                     ; the command used to run the app we are going to analyze

[Platform]
Queue     = PBS

[Queue]
nodes     = 2                                              ; optional, use batch system default if omitted
ppn       = 12                                             ; ditto
walltime  = 4:00:00                                        ; ditto
pmem      = 1gb                                            ; ditto
queuename = short                                          ; ditto

[Datastore]
config    = demo                                           ; name of perfdmf configuration

[Tool.hpctoolkit]
appsrc    = ../                                            ; source directory of the application

[Tool.tau]
mode        = instrumentation                              ; the app binary is instrumented
TAU_VERBOSE = 1                                            ; all TAU variables can be put under this section

[Analyses.metrics.pi]
metrics = PAPI_TOT_INS@150000 PAPI_TOT_CYC@250000          ; list of metircs we need

[Analyses.metrics.pi_inst]
metrics = PAPI_FP_INS PAPI_TOT_INS PAPI_RES_STL PAPI_TOT_CYC
          PAPI_L1_DCM PAPI_L1_ICM PAPI_L2_DCM PAPI_L2_ICM
	  PAPI_L1_TCM PAPI_L2_TCM PAPI_L3_TCM
derived_metrics = FP_INEFFICIENT2                          ; derived metrics, must give definition, see below
FP_INEFFICIENT2 = ((PAPI_FP_INS/PAPI_TOT_INS)*(PAPI_RES_STL/PAPI_TOT_CYC))*(PAPI_TOT_CYC/2075051737)  ; definition

