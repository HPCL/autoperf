[Main]                                                     ; * main section, entrance of the config file
version     = 1                                            ;   optional config file format version (default: 1)
Experiments = spA4_tau spA4_hpc                            ; * list of experiments going to run

[Experiments]
rootdir  = ~/tmp/autoperf                                  ; * default working dir
Platform = aciss                                           ; * the platform this experiment going to run on
mpi      = yes

[Experiments.spA4_tau]
rootdir  = ~/tmp/autoperf/spA4_tau                         ;   optional working dir for this experiment
execmd   = ~/src/NPB3.3.1/NPB3.3-MPI/bin/sp.A.4.tau        ; *
exeopt   = 
Tool     = tau                                             ; * the performance tool going to be used
Analyses = metrics                                         ; * list of analyses going to run

[Experiments.spA4_hpc]
rootdir  = ~/tmp/autoperf/spA4_hpc
execmd   = ~/src/NPB3.3.1/NPB3.3-MPI/bin/sp.A.4.hpc        ; *
exeopt   = 
Tool     = hpctoolkit
Analyses = metrics

[Platform]
Queue    = PBS

[Platform.aciss]
Queue    = PBS

[PBS.aciss]                                                 ; *
nodes    = 4
ppn      = 12
walltime = 4:00:00
pmem     = 1gb

[PBS.aciss.spA4_hpc]
nodes    = 1
ppn      = 4

[Tool.tau]
TAULIB      = /usr/local/packages/tau-2.22/x86_64/lib
TAU_VERBOSE = 1

[Tool.tau.spA4_tau]
PROFILEDIR  = profiles

[Tool.hpctoolkit.spA4_hpc]
appsrc = ~/src/NPB3.3.1/NPB3.3-MPI

[Analyses.metrics.spA4_tau]
metrics = PAPI_FP_INS PAPI_TOT_INS PAPI_RES_STL PAPI_TOT_CYC
derived_metrics = FP_INEFFICIENT2 DEMO
FP_INEFFICIENT2 = ((PAPI_FP_INS/PAPI_TOT_INS)*(PAPI_RES_STL/PAPI_TOT_CYC))*(PAPI_TOT_CYC/2075051737)
DEMO = (PAPI_FP_INS/PAPI_TOT_INS)

[Analyses.metrics.spA4_hpc]
metrics = PAPI_TOT_INS@150000
